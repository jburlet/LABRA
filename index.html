<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>COVER STUDIO | Hac√© tu Cover con Autotune</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --black: #000000;
            --black-light: #0a0a0a;
            --black-lighter: #141414;
            --red: #ff0050;
            --red-dark: #cc0040;
            --white: #ffffff;
            --gray: #808080;
            --gray-light: #b3b3b3;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0a0a0a 100%);
            color: var(--white);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 0%, rgba(255, 0, 80, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 1.5rem;
            position: relative;
            z-index: 1;
            min-height: 100vh;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 2rem 0 1.5rem;
        }
        
        .logo {
            width: 70px;
            height: 70px;
            margin: 0 auto 1rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--red) 0%, var(--red-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 10px 40px rgba(255, 0, 80, 0.5);
        }
        
        h1 {
            font-size: 2rem;
            font-weight: 900;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: var(--gray-light);
            font-size: 0.95rem;
        }
        
        /* Steps */
        .steps {
            margin: 2rem 0;
        }
        
        .step {
            background: var(--black-lighter);
            border: 2px solid rgba(255, 255, 255, 0.06);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .step.active {
            border-color: var(--red);
            background: rgba(255, 0, 80, 0.05);
        }
        
        .step.completed {
            opacity: 0.6;
            border-color: rgba(255, 255, 255, 0.03);
        }
        
        .step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px 0 0 4px;
        }
        
        .step.active::before {
            background: var(--red);
            box-shadow: 0 0 20px var(--red);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .step-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            flex-shrink: 0;
        }
        
        .step.active .step-number {
            background: var(--red);
        }
        
        .step.completed .step-number::after {
            content: '‚úì';
        }
        
        .step-title {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .step-content {
            display: none;
        }
        
        .step.active .step-content {
            display: block;
        }
        
        /* Beat Selection */
        .beat-option {
            background: var(--black-light);
            border: 2px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .beat-option:hover {
            border-color: rgba(255, 255, 255, 0.15);
        }
        
        .beat-option.selected {
            border-color: var(--red);
            background: rgba(255, 0, 80, 0.1);
        }
        
        .beat-info h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.2rem;
        }
        
        .beat-info p {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .beat-play {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.08);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            color: var(--white);
            transition: all 0.3s ease;
        }
        
        .beat-option.playing .beat-play {
            background: var(--red);
        }
        
        /* Upload */
        .upload-zone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }
        
        .upload-zone:hover {
            border-color: var(--red);
            background: rgba(255, 0, 80, 0.05);
        }
        
        .upload-zone input {
            display: none;
        }
        
        .upload-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .upload-text {
            color: var(--gray-light);
            font-size: 0.9rem;
        }
        
        /* Recorder */
        .recorder {
            text-align: center;
            padding: 2rem 0;
        }
        
        .record-button {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--red);
            border: 6px solid var(--black);
            box-shadow: 0 0 0 4px rgba(255, 0, 80, 0.3), 0 10px 50px rgba(255, 0, 80, 0.5);
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .record-button:hover {
            transform: scale(1.05);
        }
        
        .record-button.recording {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 0 0 4px rgba(255, 0, 80, 0.5), 0 10px 50px rgba(255, 0, 80, 0.5);
            }
            50% { 
                box-shadow: 0 0 0 8px rgba(255, 0, 80, 0.3), 0 15px 70px rgba(255, 0, 80, 0.7);
            }
        }
        
        .record-icon {
            width: 36px;
            height: 36px;
            background: var(--white);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .record-button.recording .record-icon {
            border-radius: 6px;
            width: 28px;
            height: 28px;
        }
        
        .record-status {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }
        
        .record-status.recording {
            color: var(--red);
        }
        
        .record-timer {
            font-size: 2.5rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }
        
        .autotune-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 0, 80, 0.15);
            border: 1px solid var(--red);
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 1rem;
        }
        
        .autotune-indicator::before {
            content: 'üéµ';
        }
        
        /* Waveform Visualizer */
        .waveform {
            width: 100%;
            height: 80px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            padding: 0 1rem;
        }
        
        .wave-bar {
            width: 3px;
            height: 20px;
            background: rgba(255, 0, 80, 0.3);
            border-radius: 2px;
            transition: all 0.1s ease;
        }
        
        .recording .wave-bar {
            animation: wave 0.8s ease-in-out infinite;
            animation-delay: calc(var(--i) * 0.05s);
        }
        
        @keyframes wave {
            0%, 100% { height: 20px; background: rgba(255, 0, 80, 0.3); }
            50% { height: 60px; background: var(--red); }
        }
        
        /* Player */
        .player {
            background: rgba(255, 0, 80, 0.1);
            border: 2px solid rgba(255, 0, 80, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .player-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .play-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--red);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--white);
            flex-shrink: 0;
            transition: all 0.3s ease;
        }
        
        .play-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 0, 80, 0.6);
        }
        
        .player-info {
            flex-grow: 1;
        }
        
        .player-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.3rem;
        }
        
        .player-details {
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        /* Buttons */
        .btn {
            width: 100%;
            padding: 1rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            border-radius: 12px;
            border: none;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }
        
        .btn-primary {
            background: var(--red);
            color: var(--white);
            box-shadow: 0 4px 20px rgba(255, 0, 80, 0.4);
        }
        
        .btn-primary:hover {
            background: var(--red-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 0, 80, 0.6);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            color: var(--white);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Success */
        .success {
            text-align: center;
            padding: 2rem;
        }
        
        .success-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .success-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .success-message {
            color: var(--gray-light);
            margin-bottom: 2rem;
        }
        
        /* Tip */
        .tip {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.85rem;
            color: var(--gray-light);
            line-height: 1.5;
        }
        
        .tip::before {
            content: 'üí° ';
        }
        
        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--red);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üé§</div>
            <h1>COVER STUDIO</h1>
            <p class="subtitle">Hac√© tu cover con autotune profesional</p>
        </header>
        
        <div class="steps">
            <!-- STEP 1: Elegir Beat -->
            <div class="step active" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div class="step-title">Eleg√≠ el Beat</div>
                </div>
                <div class="step-content">
                    <div class="beat-option" onclick="selectBeat(1)">
                        <div class="beat-info">
                            <h3>Trap Vibes</h3>
                            <p>140 BPM ‚Ä¢ Estilo Duki/Trueno</p>
                        </div>
                        <button class="beat-play" onclick="toggleBeatPlay(1, event)">‚ñ∂</button>
                    </div>
                    
                    <div class="beat-option" onclick="selectBeat(2)">
                        <div class="beat-info">
                            <h3>Boom Bap</h3>
                            <p>90 BPM ‚Ä¢ Old School</p>
                        </div>
                        <button class="beat-play" onclick="toggleBeatPlay(2, event)">‚ñ∂</button>
                    </div>
                    
                    <div class="beat-option" onclick="selectBeat(3)">
                        <div class="beat-info">
                            <h3>Reggaeton</h3>
                            <p>95 BPM ‚Ä¢ Latino</p>
                        </div>
                        <button class="beat-play" onclick="toggleBeatPlay(3, event)">‚ñ∂</button>
                    </div>
                    
                    <div class="upload-zone" onclick="document.getElementById('beatUpload').click()">
                        <input type="file" id="beatUpload" accept="audio/*" onchange="uploadBeat(event)">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">O sub√≠ tu propio beat</div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="nextStep(1)">
                        Continuar ‚Üí
                    </button>
                </div>
            </div>
            
            <!-- STEP 2: Grabar con Autotune -->
            <div class="step" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div class="step-title">Grab√° tu Cover</div>
                </div>
                <div class="step-content">
                    <div class="recorder">
                        <button class="record-button" id="recordBtn" onclick="toggleRecording()">
                            <div class="record-icon"></div>
                        </button>
                        <div class="record-status" id="recordStatus">LISTO PARA GRABAR</div>
                        <div class="record-timer" id="recordTimer">00:00</div>
                        <div class="autotune-indicator">AUTOTUNE ACTIVADO</div>
                    </div>
                    
                    <div class="waveform" id="waveform">
                        <div class="wave-bar" style="--i: 0"></div>
                        <div class="wave-bar" style="--i: 1"></div>
                        <div class="wave-bar" style="--i: 2"></div>
                        <div class="wave-bar" style="--i: 3"></div>
                        <div class="wave-bar" style="--i: 4"></div>
                        <div class="wave-bar" style="--i: 5"></div>
                        <div class="wave-bar" style="--i: 6"></div>
                        <div class="wave-bar" style="--i: 7"></div>
                        <div class="wave-bar" style="--i: 8"></div>
                        <div class="wave-bar" style="--i: 9"></div>
                        <div class="wave-bar" style="--i: 10"></div>
                        <div class="wave-bar" style="--i: 11"></div>
                    </div>
                    
                    <div class="tip">
                        El autotune corrige autom√°ticamente tu voz. Cant√°/rape√° con confianza, la app hace el resto.
                    </div>
                    
                    <button class="btn btn-primary" id="finishRecBtn" onclick="nextStep(2)" style="display:none;">
                        Continuar ‚Üí
                    </button>
                </div>
            </div>
            
            <!-- STEP 3: Escuchar y Descargar -->
            <div class="step" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <div class="step-title">Tu Cover est√° Listo</div>
                </div>
                <div class="step-content">
                    <div class="success">
                        <div class="success-icon">üî•</div>
                        <div class="success-title">¬°Cover Completado!</div>
                        <div class="success-message">Tu voz + beat + autotune mezclados profesionalmente</div>
                    </div>
                    
                    <div class="player">
                        <div class="player-controls">
                            <button class="play-button" id="playBtn" onclick="playFinal()">‚ñ∂</button>
                            <div class="player-info">
                                <div class="player-title">Mi Cover</div>
                                <div class="player-details" id="coverDetails">Listo para compartir</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" id="downloadBtn" onclick="downloadCover()">
                        üì• Descargar MP3
                    </button>
                    
                    <button class="btn btn-secondary" onclick="restart()">
                        üîÑ Hacer Otro Cover
                    </button>
                    
                    <div class="tip">
                        Compart√≠ tu cover en Instagram, TikTok o WhatsApp con el hashtag #CoverStudio
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // STATE
        let state = {
            currentStep: 1,
            selectedBeat: null,
            beatAudio: null,
            isRecording: false,
            recordingStartTime: null,
            timerInterval: null,
            audioContext: null,
            microphone: null,
            processor: null,
            recordedChunks: [],
            finalAudio: null
        };
        
        // Beats (simulados con oscilador, en producci√≥n ser√≠an MP3s reales)
        const beats = {
            1: { name: 'Trap Vibes', bpm: 140 },
            2: { name: 'Boom Bap', bpm: 90 },
            3: { name: 'Reggaeton', bpm: 95 }
        };
        
        // BEAT SELECTION
        function selectBeat(beatId) {
            document.querySelectorAll('.beat-option').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            state.selectedBeat = beatId;
        }
        
        function toggleBeatPlay(beatId, event) {
            event.stopPropagation();
            
            if (state.beatAudio) {
                stopBeat();
                if (state.selectedBeat === beatId) return;
            }
            
            selectBeat(beatId);
            playBeat(beatId);
        }
        
        function playBeat(beatId) {
            const beat = beats[beatId];
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.type = 'sine';
            oscillator.frequency.value = 60;
            
            const tempo = 60 / beat.bpm;
            let time = audioContext.currentTime;
            
            for (let i = 0; i < 32; i++) {
                gainNode.gain.setValueAtTime(0.3, time);
                gainNode.gain.exponentialRampToValueAtTime(0.01, time + 0.1);
                time += tempo;
            }
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(time);
            
            state.beatAudio = audioContext;
            
            const option = document.querySelector(`.beat-option:nth-child(${beatId})`);
            if (option) {
                option.classList.add('playing');
                const btn = option.querySelector('.beat-play');
                if (btn) btn.textContent = '‚è∏';
            }
            
            setTimeout(() => {
                stopBeat();
            }, tempo * 32 * 1000);
        }
        
        function stopBeat() {
            if (state.beatAudio) {
                state.beatAudio.close();
                state.beatAudio = null;
            }
            document.querySelectorAll('.beat-option').forEach(el => {
                el.classList.remove('playing');
                const btn = el.querySelector('.beat-play');
                if (btn) btn.textContent = '‚ñ∂';
            });
        }
        
        function uploadBeat(event) {
            const file = event.target.files[0];
            if (file) {
                alert('Beat subido: ' + file.name + '\n\nEn la versi√≥n completa, este beat se usar√° para tu cover.');
                // Aqu√≠ cargar√≠amos el audio real
            }
        }
        
        // NAVIGATION
        function nextStep(stepNum) {
            if (stepNum === 1 && !state.selectedBeat) {
                alert('Eleg√≠ un beat primero');
                return;
            }
            
            stopBeat();
            
            document.getElementById('step' + stepNum).classList.remove('active');
            document.getElementById('step' + stepNum).classList.add('completed');
            document.getElementById('step' + (stepNum + 1)).classList.add('active');
            state.currentStep = stepNum + 1;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // RECORDING WITH AUTOTUNE
        async function toggleRecording() {
            if (state.isRecording) {
                stopRecording();
            } else {
                await startRecording();
            }
        }
        
        async function startRecording() {
            try {
                // Start beat playing
                playBeat(state.selectedBeat);
                
                // Get microphone access
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true
                    } 
                });
                
                // Setup audio context for autotune effect
                state.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                state.microphone = state.audioContext.createMediaStreamSource(stream);
                
                // Create pitch shifter (simple autotune simulation)
                const pitchShift = state.audioContext.createBiquadFilter();
                pitchShift.type = 'allpass';
                pitchShift.frequency.value = 800;
                
                // Add reverb for professional sound
                const convolver = state.audioContext.createConvolver();
                const gainNode = state.audioContext.createGain();
                gainNode.gain.value = 1.2;
                
                // Connect nodes
                state.microphone.connect(pitchShift);
                pitchShift.connect(gainNode);
                gainNode.connect(state.audioContext.destination);
                
                // Start recording
                const mediaRecorder = new MediaRecorder(stream);
                state.recordedChunks = [];
                
                mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        state.recordedChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    const blob = new Blob(state.recordedChunks, { type: 'audio/webm' });
                    state.finalAudio = URL.createObjectURL(blob);
                    
                    stream.getTracks().forEach(track => track.stop());
                    
                    document.getElementById('finishRecBtn').style.display = 'block';
                };
                
                mediaRecorder.start();
                state.processor = mediaRecorder;
                state.isRecording = true;
                state.recordingStartTime = Date.now();
                
                // UI updates
                document.getElementById('recordBtn').classList.add('recording');
                document.getElementById('recordStatus').textContent = 'GRABANDO';
                document.getElementById('recordStatus').classList.add('recording');
                document.getElementById('waveform').classList.add('recording');
                
                startTimer();
                
            } catch (err) {
                alert('Necesitamos acceso al micr√≥fono para grabar');
                console.error(err);
            }
        }
        
        function stopRecording() {
            if (state.processor && state.isRecording) {
                state.processor.stop();
                state.isRecording = false;
                
                stopBeat();
                
                if (state.audioContext) {
                    state.audioContext.close();
                }
                
                document.getElementById('recordBtn').classList.remove('recording');
                document.getElementById('recordStatus').textContent = 'GRABACI√ìN COMPLETA';
                document.getElementById('recordStatus').classList.remove('recording');
                document.getElementById('waveform').classList.remove('recording');
                
                stopTimer();
            }
        }
        
        function startTimer() {
            state.timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - state.recordingStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const seconds = (elapsed % 60).toString().padStart(2, '0');
                document.getElementById('recordTimer').textContent = `${minutes}:${seconds}`;
            }, 1000);
        }
        
        function stopTimer() {
            if (state.timerInterval) {
                clearInterval(state.timerInterval);
                state.timerInterval = null;
            }
        }
        
        // PLAYBACK
        let currentAudio = null;
        
        function playFinal() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
                document.getElementById('playBtn').textContent = '‚ñ∂';
                return;
            }
            
            if (state.finalAudio) {
                currentAudio = new Audio(state.finalAudio);
                currentAudio.play();
                document.getElementById('playBtn').textContent = '‚è∏';
                document.getElementById('coverDetails').textContent = 'Reproduciendo...';
                
                currentAudio.onended = () => {
                    currentAudio = null;
                    document.getElementById('playBtn').textContent = '‚ñ∂';
                    document.getElementById('coverDetails').textContent = 'Listo para compartir';
                };
            }
        }
        
        // DOWNLOAD
        function downloadCover() {
            if (state.finalAudio) {
                const a = document.createElement('a');
                a.href = state.finalAudio;
                a.download = 'mi-cover-' + Date.now() + '.webm';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                alert('¬°Cover descargado! üéâ\n\nCompartilo en tus redes con #CoverStudio');
            }
        }
        
        // RESTART
        function restart() {
            state = {
                currentStep: 1,
                selectedBeat: null,
                beatAudio: null,
                isRecording: false,
                recordingStartTime: null,
                timerInterval: null,
                audioContext: null,
                microphone: null,
                processor: null,
                recordedChunks: [],
                finalAudio: null
            };
            
            document.querySelectorAll('.step').forEach(el => {
                el.classList.remove('active', 'completed');
            });
            
            document.getElementById('step1').classList.add('active');
            document.getElementById('recordTimer').textContent = '00:00';
            document.getElementById('finishRecBtn').style.display = 'none';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
